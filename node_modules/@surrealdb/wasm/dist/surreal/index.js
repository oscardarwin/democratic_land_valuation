var Deno=globalThis.Deno??(typeof global>"u"?void 0:{readFile:(await import("node:fs")).readFileSync}),module=await(async()=>{let crypto=globalThis.crypto??await import("node:crypto");return{require:string=>{if(string!=="crypto")throw new Error("Unexpected require "+string);return crypto}}})(),heap=new Array(128).fill(void 0);heap.push(void 0,null,!0,!1);function getObject(idx){return heap[idx]}var WASM_VECTOR_LEN=0,cachedUint8ArrayMemory0=null;function getUint8ArrayMemory0(){return(cachedUint8ArrayMemory0===null||cachedUint8ArrayMemory0.byteLength===0)&&(cachedUint8ArrayMemory0=new Uint8Array(wasm.memory.buffer)),cachedUint8ArrayMemory0}var cachedTextEncoder=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},encodeString=function(arg,view){return cachedTextEncoder.encodeInto(arg,view)};function passStringToWasm0(arg,malloc,realloc){if(realloc===void 0){let buf=cachedTextEncoder.encode(arg),ptr2=malloc(buf.length,1)>>>0;return getUint8ArrayMemory0().subarray(ptr2,ptr2+buf.length).set(buf),WASM_VECTOR_LEN=buf.length,ptr2}let len=arg.length,ptr=malloc(len,1)>>>0,mem=getUint8ArrayMemory0(),offset=0;for(;offset<len;offset++){let code=arg.charCodeAt(offset);if(code>127)break;mem[ptr+offset]=code}if(offset!==len){offset!==0&&(arg=arg.slice(offset)),ptr=realloc(ptr,len,len=offset+arg.length*3,1)>>>0;let view=getUint8ArrayMemory0().subarray(ptr+offset,ptr+len),ret=encodeString(arg,view);offset+=ret.written,ptr=realloc(ptr,len,offset,1)>>>0}return WASM_VECTOR_LEN=offset,ptr}var cachedDataViewMemory0=null;function getDataViewMemory0(){return(cachedDataViewMemory0===null||cachedDataViewMemory0.buffer.detached===!0||cachedDataViewMemory0.buffer.detached===void 0&&cachedDataViewMemory0.buffer!==wasm.memory.buffer)&&(cachedDataViewMemory0=new DataView(wasm.memory.buffer)),cachedDataViewMemory0}var heap_next=heap.length;function addHeapObject(obj){heap_next===heap.length&&heap.push(heap.length+1);let idx=heap_next;return heap_next=heap[idx],heap[idx]=obj,idx}function handleError(f,args){try{return f.apply(this,args)}catch(e){wasm.__wbindgen_export_2(addHeapObject(e))}}var cachedTextDecoder=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&cachedTextDecoder.decode();function getStringFromWasm0(ptr,len){return ptr=ptr>>>0,cachedTextDecoder.decode(getUint8ArrayMemory0().subarray(ptr,ptr+len))}function isLikeNone(x){return x==null}function dropObject(idx){idx<132||(heap[idx]=heap_next,heap_next=idx)}function takeObject(idx){let ret=getObject(idx);return dropObject(idx),ret}var CLOSURE_DTORS=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(state=>{wasm.__wbindgen_export_4.get(state.dtor)(state.a,state.b)});function makeMutClosure(arg0,arg1,dtor,f){let state={a:arg0,b:arg1,cnt:1,dtor},real=(...args)=>{state.cnt++;let a=state.a;state.a=0;try{return f(a,state.b,...args)}finally{--state.cnt===0?(wasm.__wbindgen_export_4.get(state.dtor)(a,state.b),CLOSURE_DTORS.unregister(state)):state.a=a}};return real.original=state,CLOSURE_DTORS.register(real,state,state),real}function debugString(val){let type=typeof val;if(type=="number"||type=="boolean"||val==null)return`${val}`;if(type=="string")return`"${val}"`;if(type=="symbol"){let description=val.description;return description==null?"Symbol":`Symbol(${description})`}if(type=="function"){let name=val.name;return typeof name=="string"&&name.length>0?`Function(${name})`:"Function"}if(Array.isArray(val)){let length=val.length,debug="[";length>0&&(debug+=debugString(val[0]));for(let i=1;i<length;i++)debug+=", "+debugString(val[i]);return debug+="]",debug}let builtInMatches=/\[object ([^\]]+)\]/.exec(toString.call(val)),className;if(builtInMatches&&builtInMatches.length>1)className=builtInMatches[1];else return toString.call(val);if(className=="Object")try{return"Object("+JSON.stringify(val)+")"}catch{return"Object"}return val instanceof Error?`${val.name}: ${val.message}
${val.stack}`:className}function __wbg_adapter_52(arg0,arg1,arg2){try{let retptr=wasm.__wbindgen_add_to_stack_pointer(-16);wasm.__wbindgen_export_5(retptr,arg0,arg1,addHeapObject(arg2));var r0=getDataViewMemory0().getInt32(retptr+4*0,!0),r1=getDataViewMemory0().getInt32(retptr+4*1,!0);if(r1)throw takeObject(r0)}finally{wasm.__wbindgen_add_to_stack_pointer(16)}}function __wbg_adapter_55(arg0,arg1){wasm.__wbindgen_export_6(arg0,arg1)}function __wbg_adapter_58(arg0,arg1,arg2){wasm.__wbindgen_export_7(arg0,arg1,addHeapObject(arg2))}function __wbg_adapter_325(arg0,arg1,arg2,arg3){wasm.__wbindgen_export_8(arg0,arg1,addHeapObject(arg2),addHeapObject(arg3))}var __wbindgen_enum_IdbCursorDirection=["next","nextunique","prev","prevunique"],__wbindgen_enum_IdbTransactionMode=["readonly","readwrite","versionchange","readwriteflush","cleanup"];var __wbindgen_enum_RequestCredentials=["omit","same-origin","include"],__wbindgen_enum_RequestMode=["same-origin","no-cors","cors","navigate"],IntoUnderlyingByteSourceFinalization=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(ptr=>wasm.__wbg_intounderlyingbytesource_free(ptr>>>0,1));var IntoUnderlyingSinkFinalization=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(ptr=>wasm.__wbg_intounderlyingsink_free(ptr>>>0,1));var IntoUnderlyingSourceFinalization=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(ptr=>wasm.__wbg_intounderlyingsource_free(ptr>>>0,1)),IntoUnderlyingSource=class{static __wrap(ptr){ptr=ptr>>>0;let obj=Object.create(IntoUnderlyingSource.prototype);return obj.__wbg_ptr=ptr,IntoUnderlyingSourceFinalization.register(obj,obj.__wbg_ptr,obj),obj}__destroy_into_raw(){let ptr=this.__wbg_ptr;return this.__wbg_ptr=0,IntoUnderlyingSourceFinalization.unregister(this),ptr}free(){let ptr=this.__destroy_into_raw();wasm.__wbg_intounderlyingsource_free(ptr,0)}pull(controller){let ret=wasm.intounderlyingsource_pull(this.__wbg_ptr,addHeapObject(controller));return takeObject(ret)}cancel(){let ptr=this.__destroy_into_raw();wasm.intounderlyingsource_cancel(ptr)}},SurrealWasmEngineFinalization=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(ptr=>wasm.__wbg_surrealwasmengine_free(ptr>>>0,1)),SurrealWasmEngine=class{static __wrap(ptr){ptr=ptr>>>0;let obj=Object.create(SurrealWasmEngine.prototype);return obj.__wbg_ptr=ptr,SurrealWasmEngineFinalization.register(obj,obj.__wbg_ptr,obj),obj}__destroy_into_raw(){let ptr=this.__wbg_ptr;return this.__wbg_ptr=0,SurrealWasmEngineFinalization.unregister(this),ptr}free(){let ptr=this.__destroy_into_raw();wasm.__wbg_surrealwasmengine_free(ptr,0)}execute(data){let ret=wasm.surrealwasmengine_execute(this.__wbg_ptr,addHeapObject(data));return takeObject(ret)}notifications(){try{let retptr=wasm.__wbindgen_add_to_stack_pointer(-16);wasm.surrealwasmengine_notifications(retptr,this.__wbg_ptr);var r0=getDataViewMemory0().getInt32(retptr+4*0,!0),r1=getDataViewMemory0().getInt32(retptr+4*1,!0),r2=getDataViewMemory0().getInt32(retptr+4*2,!0);if(r2)throw takeObject(r1);return takeObject(r0)}finally{wasm.__wbindgen_add_to_stack_pointer(16)}}static connect(endpoint,opts){let ptr0=passStringToWasm0(endpoint,wasm.__wbindgen_export_0,wasm.__wbindgen_export_1),len0=WASM_VECTOR_LEN,ret=wasm.surrealwasmengine_connect(ptr0,len0,isLikeNone(opts)?0:addHeapObject(opts));return takeObject(ret)}export(config){let ret=wasm.surrealwasmengine_export(this.__wbg_ptr,isLikeNone(config)?0:addHeapObject(config));return takeObject(ret)}import(input){let ptr0=passStringToWasm0(input,wasm.__wbindgen_export_0,wasm.__wbindgen_export_1),len0=WASM_VECTOR_LEN,ret=wasm.surrealwasmengine_import(this.__wbg_ptr,ptr0,len0);return takeObject(ret)}static version(){let deferred2_0,deferred2_1;try{let retptr=wasm.__wbindgen_add_to_stack_pointer(-16);wasm.surrealwasmengine_version(retptr);var r0=getDataViewMemory0().getInt32(retptr+4*0,!0),r1=getDataViewMemory0().getInt32(retptr+4*1,!0),r2=getDataViewMemory0().getInt32(retptr+4*2,!0),r3=getDataViewMemory0().getInt32(retptr+4*3,!0),ptr1=r0,len1=r1;if(r3)throw ptr1=0,len1=0,takeObject(r2);return deferred2_0=ptr1,deferred2_1=len1,getStringFromWasm0(ptr1,len1)}finally{wasm.__wbindgen_add_to_stack_pointer(16),wasm.__wbindgen_export_3(deferred2_0,deferred2_1,1)}}},imports={__wbindgen_placeholder__:{__wbg_String_8f0eb39a4a4c2f66:function(arg0,arg1){let ret=String(getObject(arg1)),ptr1=passStringToWasm0(ret,wasm.__wbindgen_export_0,wasm.__wbindgen_export_1),len1=WASM_VECTOR_LEN;getDataViewMemory0().setInt32(arg0+4*1,len1,!0),getDataViewMemory0().setInt32(arg0+4*0,ptr1,!0)},__wbg_abort_7b156f9a934692c8:function(){return handleError(function(arg0){getObject(arg0).abort()},arguments)},__wbg_abort_8d4ada33948fb9ea:function(arg0){getObject(arg0).abort()},__wbg_advance_abb49821a3fbd03f:function(){return handleError(function(arg0,arg1){getObject(arg0).advance(arg1>>>0)},arguments)},__wbg_append_3e87a8957446cdbe:function(){return handleError(function(arg0,arg1,arg2,arg3){getObject(arg0).append(getStringFromWasm0(arg1,arg2),getObject(arg3))},arguments)},__wbg_append_606491fde95f39dd:function(){return handleError(function(arg0,arg1,arg2,arg3,arg4,arg5){getObject(arg0).append(getStringFromWasm0(arg1,arg2),getObject(arg3),getStringFromWasm0(arg4,arg5))},arguments)},__wbg_append_7d0ec8d7eeb807f8:function(){return handleError(function(arg0,arg1,arg2,arg3,arg4){getObject(arg0).append(getStringFromWasm0(arg1,arg2),getStringFromWasm0(arg3,arg4))},arguments)},__wbg_append_8a69fec038be9b14:function(){return handleError(function(arg0,arg1,arg2,arg3,arg4){getObject(arg0).append(getStringFromWasm0(arg1,arg2),getStringFromWasm0(arg3,arg4))},arguments)},__wbg_arrayBuffer_244b9be4ec34cae8:function(){return handleError(function(arg0){let ret=getObject(arg0).arrayBuffer();return addHeapObject(ret)},arguments)},__wbg_bound_4f1813f8f3e3f9d9:function(){return handleError(function(arg0,arg1,arg2,arg3){let ret=IDBKeyRange.bound(getObject(arg0),getObject(arg1),arg2!==0,arg3!==0);return addHeapObject(ret)},arguments)},__wbg_buffer_09165b52af8c5237:function(arg0){let ret=getObject(arg0).buffer;return addHeapObject(ret)},__wbg_buffer_609cc3eee51ed158:function(arg0){let ret=getObject(arg0).buffer;return addHeapObject(ret)},__wbg_byobRequest_9dd6d13eb365e223:function(arg0){let ret=getObject(arg0).byobRequest;return isLikeNone(ret)?0:addHeapObject(ret)},__wbg_byteLength_e674b853d9c77e1d:function(arg0){return getObject(arg0).byteLength},__wbg_byteOffset_fd862df290ef848d:function(arg0){return getObject(arg0).byteOffset},__wbg_call_672a4d21634d4a24:function(){return handleError(function(arg0,arg1){let ret=getObject(arg0).call(getObject(arg1));return addHeapObject(ret)},arguments)},__wbg_call_7cccdd69e0791ae2:function(){return handleError(function(arg0,arg1,arg2){let ret=getObject(arg0).call(getObject(arg1),getObject(arg2));return addHeapObject(ret)},arguments)},__wbg_close_2c98beee2b59af63:function(){return handleError(function(arg0){getObject(arg0).close()},arguments)},__wbg_close_f825000f2241f096:function(){return handleError(function(arg0){getObject(arg0).close()},arguments)},__wbg_contains_937335f901da551e:function(arg0,arg1,arg2){return getObject(arg0).contains(getStringFromWasm0(arg1,arg2))},__wbg_continue_27b71757c0c4fea9:function(){return handleError(function(arg0){getObject(arg0).continue()},arguments)},__wbg_createIndex_27f2cac51a4cd52d:function(){return handleError(function(arg0,arg1,arg2,arg3,arg4){let ret=getObject(arg0).createIndex(getStringFromWasm0(arg1,arg2),getObject(arg3),getObject(arg4));return addHeapObject(ret)},arguments)},__wbg_createObjectStore_6c362cb985544591:function(){return handleError(function(arg0,arg1,arg2,arg3){let ret=getObject(arg0).createObjectStore(getStringFromWasm0(arg1,arg2),getObject(arg3));return addHeapObject(ret)},arguments)},__wbg_crypto_ed58b8e10a292839:function(arg0){let ret=getObject(arg0).crypto;return addHeapObject(ret)},__wbg_deleteIndex_3cbe58a8d944e296:function(){return handleError(function(arg0,arg1,arg2){getObject(arg0).deleteIndex(getStringFromWasm0(arg1,arg2))},arguments)},__wbg_deleteObjectStore_20a09699039e66cf:function(){return handleError(function(arg0,arg1,arg2){getObject(arg0).deleteObjectStore(getStringFromWasm0(arg1,arg2))},arguments)},__wbg_delete_53dfb3f8054be6d4:function(){return handleError(function(arg0,arg1){let ret=getObject(arg0).delete(getObject(arg1));return addHeapObject(ret)},arguments)},__wbg_done_769e5ede4b31c67b:function(arg0){return getObject(arg0).done},__wbg_enqueue_8a48484465436b3b:function(){return handleError(function(arg0,arg1){getObject(arg0).enqueue(getObject(arg1))},arguments)},__wbg_entries_3265d4158b33e5dc:function(arg0){let ret=Object.entries(getObject(arg0));return addHeapObject(ret)},__wbg_error_3230f94bfce7b80b:function(){return handleError(function(arg0){let ret=getObject(arg0).error;return isLikeNone(ret)?0:addHeapObject(ret)},arguments)},__wbg_error_7534b8e9a36f1ab4:function(arg0,arg1){let deferred0_0,deferred0_1;try{deferred0_0=arg0,deferred0_1=arg1,console.error(getStringFromWasm0(arg0,arg1))}finally{wasm.__wbindgen_export_3(deferred0_0,deferred0_1,1)}},__wbg_fetch_b335d17f45a8b5a1:function(arg0){let ret=fetch(getObject(arg0));return addHeapObject(ret)},__wbg_fetch_f649bd7134840205:function(arg0,arg1){let ret=getObject(arg0).fetch(getObject(arg1));return addHeapObject(ret)},__wbg_getRandomValues_bcb4912f16000dc4:function(){return handleError(function(arg0,arg1){getObject(arg0).getRandomValues(getObject(arg1))},arguments)},__wbg_getTime_46267b1c24877e30:function(arg0){return getObject(arg0).getTime()},__wbg_getTimezoneOffset_6b5752021c499c47:function(arg0){return getObject(arg0).getTimezoneOffset()},__wbg_get_03362f1d791e71b4:function(arg0,arg1,arg2){let ret=getObject(arg1)[arg2>>>0];var ptr1=isLikeNone(ret)?0:passStringToWasm0(ret,wasm.__wbindgen_export_0,wasm.__wbindgen_export_1),len1=WASM_VECTOR_LEN;getDataViewMemory0().setInt32(arg0+4*1,len1,!0),getDataViewMemory0().setInt32(arg0+4*0,ptr1,!0)},__wbg_get_67b2ba62fc30de12:function(){return handleError(function(arg0,arg1){let ret=Reflect.get(getObject(arg0),getObject(arg1));return addHeapObject(ret)},arguments)},__wbg_get_b9b93047fe3cf45b:function(arg0,arg1){let ret=getObject(arg0)[arg1>>>0];return addHeapObject(ret)},__wbg_get_cb402296cc90b202:function(){return handleError(function(arg0,arg1){let ret=getObject(arg0).get(getObject(arg1));return addHeapObject(ret)},arguments)},__wbg_getwithrefkey_1dc361bd10053bfe:function(arg0,arg1){let ret=getObject(arg0)[getObject(arg1)];return addHeapObject(ret)},__wbg_has_a5ea9117f258a0ec:function(){return handleError(function(arg0,arg1){return Reflect.has(getObject(arg0),getObject(arg1))},arguments)},__wbg_headers_cc3fc3b432f8aabc:function(arg0){let ret=getObject(arg0).headers;return addHeapObject(ret)},__wbg_indexNames_e6b5af4de19535f9:function(arg0){let ret=getObject(arg0).indexNames;return addHeapObject(ret)},__wbg_instanceof_ArrayBuffer_e14585432e3737fc:function(arg0){let result;try{result=getObject(arg0)instanceof ArrayBuffer}catch{result=!1}return result},__wbg_instanceof_IdbFactory_208c69fb742144ef:function(arg0){let result;try{result=getObject(arg0)instanceof IDBFactory}catch{result=!1}return result},__wbg_instanceof_Map_f3469ce2244d2430:function(arg0){let result;try{result=getObject(arg0)instanceof Map}catch{result=!1}return result},__wbg_instanceof_Response_d1b3f08d4983dc43:function(arg0){let result;try{result=getObject(arg0)instanceof Response}catch{result=!1}return result},__wbg_instanceof_Uint8Array_17156bcf118086a9:function(arg0){let result;try{result=getObject(arg0)instanceof Uint8Array}catch{result=!1}return result},__wbg_isArray_a1eab7e0d067391b:function(arg0){return Array.isArray(getObject(arg0))},__wbg_isSafeInteger_343e2beeeece1bb0:function(arg0){return Number.isSafeInteger(getObject(arg0))},__wbg_iterator_9a24c88df860dc65:function(){return addHeapObject(Symbol.iterator)},__wbg_key_c1ce61ee9fe74d5e:function(){return handleError(function(arg0){let ret=getObject(arg0).key;return addHeapObject(ret)},arguments)},__wbg_length_3d288388f4eff153:function(arg0){return getObject(arg0).length},__wbg_length_a446193dc22c12f8:function(arg0){return getObject(arg0).length},__wbg_length_e2d2a49132c1b256:function(arg0){return getObject(arg0).length},__wbg_msCrypto_0a36e2ec3a343d26:function(arg0){let ret=getObject(arg0).msCrypto;return addHeapObject(ret)},__wbg_new0_f788a2397c7ca929:function(){return addHeapObject(new Date)},__wbg_new_23a2665fac83c611:function(arg0,arg1){try{var state0={a:arg0,b:arg1},cb0=(arg02,arg12)=>{let a=state0.a;state0.a=0;try{return __wbg_adapter_325(a,state0.b,arg02,arg12)}finally{state0.a=a}};let ret=new Promise(cb0);return addHeapObject(ret)}finally{state0.a=state0.b=0}},__wbg_new_30ce8fc18ad7d74d:function(){return handleError(function(){let ret=new FormData;return addHeapObject(ret)},arguments)},__wbg_new_31a97dac4f10fab7:function(arg0){let ret=new Date(getObject(arg0));return addHeapObject(ret)},__wbg_new_3955c5041f5c225a:function(){return handleError(function(){let ret=new AbortController;return addHeapObject(ret)},arguments)},__wbg_new_405e22f390576ce2:function(){let ret=new Object;return addHeapObject(ret)},__wbg_new_78feb108b6472713:function(){let ret=new Array;return addHeapObject(ret)},__wbg_new_8a6f238a6ece86ea:function(){let ret=new Error;return addHeapObject(ret)},__wbg_new_9d9027fccb1f4cb1:function(){return handleError(function(){let ret=new Headers;return addHeapObject(ret)},arguments)},__wbg_new_a12002a7f91c75be:function(arg0){let ret=new Uint8Array(getObject(arg0));return addHeapObject(ret)},__wbg_new_c68d7209be747379:function(arg0,arg1){let ret=new Error(getStringFromWasm0(arg0,arg1));return addHeapObject(ret)},__wbg_newnoargs_105ed471475aaf50:function(arg0,arg1){let ret=new Function(getStringFromWasm0(arg0,arg1));return addHeapObject(ret)},__wbg_newwithbyteoffsetandlength_d97e637ebe145a9a:function(arg0,arg1,arg2){let ret=new Uint8Array(getObject(arg0),arg1>>>0,arg2>>>0);return addHeapObject(ret)},__wbg_newwithintounderlyingsource_b47f6a6a596a7f24:function(arg0,arg1){let ret=new ReadableStream(IntoUnderlyingSource.__wrap(arg0),takeObject(arg1));return addHeapObject(ret)},__wbg_newwithlength_a381634e90c276d4:function(arg0){let ret=new Uint8Array(arg0>>>0);return addHeapObject(ret)},__wbg_newwithstrandinit_80f4e7be678ad35c:function(){return handleError(function(arg0,arg1,arg2){let ret=new Request(getStringFromWasm0(arg0,arg1),getObject(arg2));return addHeapObject(ret)},arguments)},__wbg_newwithu8arraysequenceandoptions_d9b305a9018c69af:function(){return handleError(function(arg0,arg1){let ret=new Blob(getObject(arg0),getObject(arg1));return addHeapObject(ret)},arguments)},__wbg_next_25feadfc0913fea9:function(arg0){let ret=getObject(arg0).next;return addHeapObject(ret)},__wbg_next_6574e1a8a62d1055:function(){return handleError(function(arg0){let ret=getObject(arg0).next();return addHeapObject(ret)},arguments)},__wbg_node_02999533c4ea02e3:function(arg0){let ret=getObject(arg0).node;return addHeapObject(ret)},__wbg_now_0aa56f09925b8a32:function(){return handleError(function(){return Date.now()},arguments)},__wbg_now_71123b9940376874:function(arg0){return getObject(arg0).now()},__wbg_now_807e54c39636c349:function(){return Date.now()},__wbg_now_b0b7c9b615d4d2b0:function(arg0){return getObject(arg0).now()},__wbg_objectStoreNames_a8eac7ac7196dd15:function(arg0){let ret=getObject(arg0).objectStoreNames;return addHeapObject(ret)},__wbg_objectStore_ce40908bf9e57302:function(){return handleError(function(arg0,arg1,arg2){let ret=getObject(arg0).objectStore(getStringFromWasm0(arg1,arg2));return addHeapObject(ret)},arguments)},__wbg_openCursor_3b0ef3db8f40f9e7:function(){return handleError(function(arg0){let ret=getObject(arg0).openCursor();return addHeapObject(ret)},arguments)},__wbg_openCursor_44559a0768aec010:function(){return handleError(function(arg0,arg1){let ret=getObject(arg0).openCursor(getObject(arg1));return addHeapObject(ret)},arguments)},__wbg_openCursor_ac3d0ce5dc7d2123:function(){return handleError(function(arg0,arg1,arg2){let ret=getObject(arg0).openCursor(getObject(arg1),__wbindgen_enum_IdbCursorDirection[arg2]);return addHeapObject(ret)},arguments)},__wbg_open_d146cc6a7ba27ec9:function(){return handleError(function(arg0,arg1,arg2){let ret=getObject(arg0).open(getStringFromWasm0(arg1,arg2));return addHeapObject(ret)},arguments)},__wbg_open_f7b389eba1c71f1b:function(){return handleError(function(arg0,arg1,arg2,arg3){let ret=getObject(arg0).open(getStringFromWasm0(arg1,arg2),arg3>>>0);return addHeapObject(ret)},arguments)},__wbg_performance_1a2515c93daf8b0c:function(arg0){let ret=getObject(arg0).performance;return addHeapObject(ret)},__wbg_process_5c1d670bc53614b8:function(arg0){let ret=getObject(arg0).process;return addHeapObject(ret)},__wbg_push_737cfc8c1432c2c6:function(arg0,arg1){return getObject(arg0).push(getObject(arg1))},__wbg_put_01597a848258405e:function(){return handleError(function(arg0,arg1){let ret=getObject(arg0).put(getObject(arg1));return addHeapObject(ret)},arguments)},__wbg_put_aabe694fbd34ced8:function(){return handleError(function(arg0,arg1,arg2){let ret=getObject(arg0).put(getObject(arg1),getObject(arg2));return addHeapObject(ret)},arguments)},__wbg_queueMicrotask_5a8a9131f3f0b37b:function(arg0){let ret=getObject(arg0).queueMicrotask;return addHeapObject(ret)},__wbg_queueMicrotask_6d79674585219521:function(arg0){queueMicrotask(getObject(arg0))},__wbg_randomFillSync_ab2cfe79ebbf2740:function(){return handleError(function(arg0,arg1){getObject(arg0).randomFillSync(takeObject(arg1))},arguments)},__wbg_require_79b1e9274cde3c87:function(){return handleError(function(){let ret=module.require;return addHeapObject(ret)},arguments)},__wbg_resolve_4851785c9c5f573d:function(arg0){let ret=Promise.resolve(getObject(arg0));return addHeapObject(ret)},__wbg_respond_442db8b929a98e76:function(){return handleError(function(arg0,arg1){getObject(arg0).respond(arg1>>>0)},arguments)},__wbg_result_f57debd007c5c104:function(){return handleError(function(arg0){let ret=getObject(arg0).result;return addHeapObject(ret)},arguments)},__wbg_setTimeout_efd7c11531df1743:function(){return handleError(function(arg0,arg1,arg2){return getObject(arg0).setTimeout(getObject(arg1),arg2)},arguments)},__wbg_set_65595bdd868b3009:function(arg0,arg1,arg2){getObject(arg0).set(getObject(arg1),arg2>>>0)},__wbg_setautoincrement_fcd31f31fea8c82f:function(arg0,arg1){getObject(arg0).autoIncrement=arg1!==0},__wbg_setbody_e622304a359e9997:function(arg0,arg1){getObject(arg0).body=getObject(arg1)},__wbg_setcredentials_6c1850c906a4c7d8:function(arg0,arg1){getObject(arg0).credentials=__wbindgen_enum_RequestCredentials[arg1]},__wbg_setheaders_37c4507b6650184a:function(arg0,arg1){getObject(arg0).headers=getObject(arg1)},__wbg_sethighwatermark_64ea7c426148c185:function(arg0,arg1){getObject(arg0).highWaterMark=arg1},__wbg_setkeypath_1e16c30180605f46:function(arg0,arg1){getObject(arg0).keyPath=getObject(arg1)},__wbg_setmethod_20004624d0bb3c04:function(arg0,arg1,arg2){getObject(arg0).method=getStringFromWasm0(arg1,arg2)},__wbg_setmode_cfeb23c22a98ee10:function(arg0,arg1){getObject(arg0).mode=__wbindgen_enum_RequestMode[arg1]},__wbg_setmultientry_f3a5a9f19e492f6a:function(arg0,arg1){getObject(arg0).multiEntry=arg1!==0},__wbg_setonabort_d9f829d871ee7eef:function(arg0,arg1){getObject(arg0).onabort=getObject(arg1)},__wbg_setoncomplete_9804afe8f5f9b7f3:function(arg0,arg1){getObject(arg0).oncomplete=getObject(arg1)},__wbg_setonerror_856be821d2e2bb16:function(arg0,arg1){getObject(arg0).onerror=getObject(arg1)},__wbg_setonerror_e69e5108aa7e5147:function(arg0,arg1){getObject(arg0).onerror=getObject(arg1)},__wbg_setonsuccess_2bf90c1449edce2a:function(arg0,arg1){getObject(arg0).onsuccess=getObject(arg1)},__wbg_setonupgradeneeded_d3692b955a1d8d06:function(arg0,arg1){getObject(arg0).onupgradeneeded=getObject(arg1)},__wbg_setsignal_1c7fc807a0404525:function(arg0,arg1){getObject(arg0).signal=getObject(arg1)},__wbg_settype_8bac22cb8a404937:function(arg0,arg1,arg2){getObject(arg0).type=getStringFromWasm0(arg1,arg2)},__wbg_setunique_029a53d2d65b2ed9:function(arg0,arg1){getObject(arg0).unique=arg1!==0},__wbg_signal_05cd9a8401da1904:function(arg0){let ret=getObject(arg0).signal;return addHeapObject(ret)},__wbg_stack_0ed75d68575b0f3c:function(arg0,arg1){let ret=getObject(arg1).stack,ptr1=passStringToWasm0(ret,wasm.__wbindgen_export_0,wasm.__wbindgen_export_1),len1=WASM_VECTOR_LEN;getDataViewMemory0().setInt32(arg0+4*1,len1,!0),getDataViewMemory0().setInt32(arg0+4*0,ptr1,!0)},__wbg_static_accessor_GLOBAL_88a902d13a557d07:function(){let ret=typeof global>"u"?null:global;return isLikeNone(ret)?0:addHeapObject(ret)},__wbg_static_accessor_GLOBAL_THIS_56578be7e9f832b0:function(){let ret=typeof globalThis>"u"?null:globalThis;return isLikeNone(ret)?0:addHeapObject(ret)},__wbg_static_accessor_SELF_37c5d418e4bf5819:function(){let ret=typeof self>"u"?null:self;return isLikeNone(ret)?0:addHeapObject(ret)},__wbg_static_accessor_WINDOW_5de37043a91a9c40:function(){let ret=typeof window>"u"?null:window;return isLikeNone(ret)?0:addHeapObject(ret)},__wbg_status_0469c5287b59ffc5:function(arg0){return getObject(arg0).status},__wbg_stringify_f7ed6987935b4a24:function(){return handleError(function(arg0){let ret=JSON.stringify(getObject(arg0));return addHeapObject(ret)},arguments)},__wbg_subarray_aa9065fa9dc5df96:function(arg0,arg1,arg2){let ret=getObject(arg0).subarray(arg1>>>0,arg2>>>0);return addHeapObject(ret)},__wbg_surrealwasmengine_new:function(arg0){let ret=SurrealWasmEngine.__wrap(arg0);return addHeapObject(ret)},__wbg_target_09f5f9412d4021c1:function(arg0){let ret=getObject(arg0).target;return isLikeNone(ret)?0:addHeapObject(ret)},__wbg_text_9847c497903c7989:function(){return handleError(function(arg0){let ret=getObject(arg0).text();return addHeapObject(ret)},arguments)},__wbg_then_44b73946d2fb3e7d:function(arg0,arg1){let ret=getObject(arg0).then(getObject(arg1));return addHeapObject(ret)},__wbg_then_48b406749878a531:function(arg0,arg1,arg2){let ret=getObject(arg0).then(getObject(arg1),getObject(arg2));return addHeapObject(ret)},__wbg_toString_c813bbd34d063839:function(arg0){let ret=getObject(arg0).toString();return addHeapObject(ret)},__wbg_transaction_52c74f7489f1381e:function(arg0){let ret=getObject(arg0).transaction;return isLikeNone(ret)?0:addHeapObject(ret)},__wbg_transaction_9d14aa9948a64b0d:function(){return handleError(function(arg0,arg1,arg2){let ret=getObject(arg0).transaction(getObject(arg1),__wbindgen_enum_IdbTransactionMode[arg2]);return addHeapObject(ret)},arguments)},__wbg_url_0f5a9de9ca05e0eb:function(arg0,arg1){let ret=getObject(arg1).url,ptr1=passStringToWasm0(ret,wasm.__wbindgen_export_0,wasm.__wbindgen_export_1),len1=WASM_VECTOR_LEN;getDataViewMemory0().setInt32(arg0+4*1,len1,!0),getDataViewMemory0().setInt32(arg0+4*0,ptr1,!0)},__wbg_value_aa2b46e3a9c92b9e:function(){return handleError(function(arg0){let ret=getObject(arg0).value;return addHeapObject(ret)},arguments)},__wbg_value_cd1ffa7b1ab794f1:function(arg0){let ret=getObject(arg0).value;return addHeapObject(ret)},__wbg_versions_c71aa1626a93e0a1:function(arg0){let ret=getObject(arg0).versions;return addHeapObject(ret)},__wbg_view_f0ef1c95fdf68f4a:function(arg0){let ret=getObject(arg0).view;return isLikeNone(ret)?0:addHeapObject(ret)},__wbindgen_as_number:function(arg0){return+getObject(arg0)},__wbindgen_bigint_from_i64:function(arg0){return addHeapObject(arg0)},__wbindgen_bigint_from_u64:function(arg0){let ret=BigInt.asUintN(64,arg0);return addHeapObject(ret)},__wbindgen_bigint_get_as_i64:function(arg0,arg1){let v=getObject(arg1),ret=typeof v=="bigint"?v:void 0;getDataViewMemory0().setBigInt64(arg0+8*1,isLikeNone(ret)?BigInt(0):ret,!0),getDataViewMemory0().setInt32(arg0+4*0,!isLikeNone(ret),!0)},__wbindgen_boolean_get:function(arg0){let v=getObject(arg0);return typeof v=="boolean"?v?1:0:2},__wbindgen_cb_drop:function(arg0){let obj=takeObject(arg0).original;return obj.cnt--==1?(obj.a=0,!0):!1},__wbindgen_closure_wrapper24440:function(arg0,arg1,arg2){let ret=makeMutClosure(arg0,arg1,1950,__wbg_adapter_52);return addHeapObject(ret)},__wbindgen_closure_wrapper26390:function(arg0,arg1,arg2){let ret=makeMutClosure(arg0,arg1,2182,__wbg_adapter_55);return addHeapObject(ret)},__wbindgen_closure_wrapper31226:function(arg0,arg1,arg2){let ret=makeMutClosure(arg0,arg1,2733,__wbg_adapter_58);return addHeapObject(ret)},__wbindgen_debug_string:function(arg0,arg1){let ret=debugString(getObject(arg1)),ptr1=passStringToWasm0(ret,wasm.__wbindgen_export_0,wasm.__wbindgen_export_1),len1=WASM_VECTOR_LEN;getDataViewMemory0().setInt32(arg0+4*1,len1,!0),getDataViewMemory0().setInt32(arg0+4*0,ptr1,!0)},__wbindgen_error_new:function(arg0,arg1){let ret=new Error(getStringFromWasm0(arg0,arg1));return addHeapObject(ret)},__wbindgen_in:function(arg0,arg1){return getObject(arg0)in getObject(arg1)},__wbindgen_is_bigint:function(arg0){return typeof getObject(arg0)=="bigint"},__wbindgen_is_falsy:function(arg0){return!getObject(arg0)},__wbindgen_is_function:function(arg0){return typeof getObject(arg0)=="function"},__wbindgen_is_object:function(arg0){let val=getObject(arg0);return typeof val=="object"&&val!==null},__wbindgen_is_string:function(arg0){return typeof getObject(arg0)=="string"},__wbindgen_is_undefined:function(arg0){return getObject(arg0)===void 0},__wbindgen_jsval_eq:function(arg0,arg1){return getObject(arg0)===getObject(arg1)},__wbindgen_jsval_loose_eq:function(arg0,arg1){return getObject(arg0)==getObject(arg1)},__wbindgen_memory:function(){let ret=wasm.memory;return addHeapObject(ret)},__wbindgen_number_get:function(arg0,arg1){let obj=getObject(arg1),ret=typeof obj=="number"?obj:void 0;getDataViewMemory0().setFloat64(arg0+8*1,isLikeNone(ret)?0:ret,!0),getDataViewMemory0().setInt32(arg0+4*0,!isLikeNone(ret),!0)},__wbindgen_number_new:function(arg0){return addHeapObject(arg0)},__wbindgen_object_clone_ref:function(arg0){let ret=getObject(arg0);return addHeapObject(ret)},__wbindgen_object_drop_ref:function(arg0){takeObject(arg0)},__wbindgen_string_get:function(arg0,arg1){let obj=getObject(arg1),ret=typeof obj=="string"?obj:void 0;var ptr1=isLikeNone(ret)?0:passStringToWasm0(ret,wasm.__wbindgen_export_0,wasm.__wbindgen_export_1),len1=WASM_VECTOR_LEN;getDataViewMemory0().setInt32(arg0+4*1,len1,!0),getDataViewMemory0().setInt32(arg0+4*0,ptr1,!0)},__wbindgen_string_new:function(arg0,arg1){let ret=getStringFromWasm0(arg0,arg1);return addHeapObject(ret)},__wbindgen_throw:function(arg0,arg1){throw new Error(getStringFromWasm0(arg0,arg1))}}},wasm_url=new URL("index_bg.wasm",import.meta.url),wasmCode="";switch(wasm_url.protocol){case"file:":wasmCode=await Deno.readFile(wasm_url);break;default:wasmCode=await(await fetch(wasm_url)).arrayBuffer();break}var wasmInstance=(await WebAssembly.instantiate(wasmCode,imports)).instance,wasm=wasmInstance.exports;import{getIncrementalID,ConnectionStatus,ConnectionUnavailable,AbstractEngine,EngineAuth,UnexpectedConnectionError}from"surrealdb";function surrealdbWasmEngines(opts){class WasmEmbeddedEngine extends AbstractEngine{ready=void 0;reader;status=ConnectionStatus.Disconnected;queue=[];processing=!1;db;async version(){return SurrealWasmEngine.version()}setStatus(status,...args){this.status=status,this.emitter.emit(status,args)}async connect(url){this.connection.url=url,this.setStatus(ConnectionStatus.Connecting);let ready=(async()=>{let db=await SurrealWasmEngine.connect(url.toString(),opts).catch(e=>{console.log(e);let error=new UnexpectedConnectionError(typeof e=="string"?e:"error"in e?e.error:"An unexpected error occurred");throw this.setStatus(ConnectionStatus.Error,error),e});this.db=db,await this.context.prepare?.(new EngineAuth(this)),this.setStatus(ConnectionStatus.Connected),this.reader=(async()=>{let reader=db.notifications().getReader();for(;this.connected;){let{done,value}=await reader.read();if(done)break;let raw=value,{id,action,result}=this.decodeCbor(raw.buffer);id&&this.emitter.emit(`live-${id.toString()}`,[action,result],!0)}})()})();return this.ready=ready,await ready}async disconnect(){this.connection={url:void 0,namespace:void 0,database:void 0,token:void 0},await this.ready,this.ready=void 0,this.db?.free(),this.db=void 0,await this.reader,this.reader=void 0,this.status!==ConnectionStatus.Disconnected&&this.setStatus(ConnectionStatus.Disconnected)}async rpc(request){if(await this.ready,!this.db)throw new ConnectionUnavailable;return new Promise((resolve,reject)=>{this.queue.push(async()=>{try{let result=await this.execute(request);resolve(result)}catch(error){reject(error)}}),this.processQueue()})}get connected(){return!!this.db}async processQueue(){if(!this.processing){for(this.processing=!0;this.queue.length>0;){let task=this.queue.shift();if(task)try{await task()}catch(error){console.error("Query execution failed",error)}}this.processing=!1}}async execute(request){let id=getIncrementalID(),res=await this.db.execute(new Uint8Array(this.encodeCbor({id,...request}))).then(raw=>({result:this.decodeCbor(raw.buffer)})).catch(message=>({error:{code:-1,message}}));if("result"in res)switch(request.method){case"use":{this.connection.namespace=request.params?.[0],this.connection.database=request.params?.[1];break}case"signin":case"signup":{this.connection.token=res.result;break}case"authenticate":{this.connection.token=request.params?.[0];break}case"invalidate":{this.connection.token=void 0;break}}return res}export(options){return this.db.export(options?new Uint8Array(this.encodeCbor(options)):void 0)}import(input){return this.db.import(input)}}return{mem:WasmEmbeddedEngine,indxdb:WasmEmbeddedEngine}}export{surrealdbWasmEngines};
